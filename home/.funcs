#!/bin/bash

# Python virtualenv
venv () {
        SRC_DIRECTORY="."
        mkdir $1
        virtualenv $1
        source $SRC_DIRECTORY/$1/bin/activate;
        cd $SRC_DIRECTORY/$1;
}

activate() {
    source bin/activate
}

# Quick find
f() {
    echo "find . -iname \"*$1*\""
    find . -iname "*$1*"
}

# word counter
count() {
    cat $1 | grep -o "$2" | wc -l
}

#File Encryption
encrypt(){
openssl aes-256-cbc -a -salt -in $1 -out $2
}

decrypt(){
openssl aes-256-cbc -d -a -salt -in $1 -out $2
}


death(){
kill $(ps aux | grep $1 | awk '{print $2}')
}

kde_alert(){
   sleep $1m; kdialog --title yo --passivepopup "$2" 10
}

push_it(){
    cd ~/dev/buildpackery/ruby-buildpack/cf_spec/fixtures/sinatra_web_app; cf push "$(date)" 

}

info() { declare -f $1;}

latest(){
    #usage: latest <buildpack_name>
    #checksout latest and develop, updates, and uses ../tools/get-tag.awk to get the tag
    dir=$BUILDPACKS/$1-buildpack/
    cd $dir
    git checkout master &> /dev/null && git pull origin master &> /dev/null
    echo "Master is on $($DOTFILES/tools/get-tag.awk $dir)"
    git checkout develop &> /dev/null && git pull origin develop &> /dev/null
    echo "Develop is on $($DOTFILES/tools/get-tag.awk $dir)"
}

branch_push(){
    #usage: branch_push <buildpack_name>
    #does a CF push to develop by default, else uses $2 as branch

    if [ -z ${2+x} ]; 
    then 
        cf push test -b "https://github.com/cloudfoundry/$1-buildpack#develop" --random-route
    else 
        cf push $1-test -b "https://github.com/cloudfoundry/$1-buildpack#$2" --random-route

    fi
}


tests(){
    cd $BUILDPACKS/$1-buildpack/cf_spec/fixtures
}
